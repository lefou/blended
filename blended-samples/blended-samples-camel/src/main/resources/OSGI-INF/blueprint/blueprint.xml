<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!--
  ~ Copyright 2014ff, WoQ - Way of Quality GmbH
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<blueprint
  xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
  xmlns:camel="http://camel.apache.org/schema/blueprint"
  >

  <!-- Use the Active MQ connection factory exposed in another bundle as Connection Factory. -->
  <bean  id="activemq"
         class="org.apache.camel.component.jms.JmsComponent"
         factory-method="jmsComponent">

    <argument index="0">
      <reference
        interface="javax.jms.ConnectionFactory"
        filter="provider=activemq"
        timeout="1000"/>
    </argument>
  </bean>

  <camel:camelContext id="BlendedSample">

    <camel:route id="SampleRoute">
      <camel:from uri="activemq:queue:SampleIn" />

      <camel:setHeader headerName="Description">
        <camel:constant>BlendedSample</camel:constant>
      </camel:setHeader>

      <camel:to uri="activemq:queue:SampleOut" />
    </camel:route>
  </camel:camelContext>
</blueprint>

