akka.http { #akka.http

  # TODO: work-around
  version = "10.0.11"

  server { #akka.http.server

    server-header = blended-akka-http

    preview { #akka.http.server.preview
      enable-http2 = off
    }

    idle-timeout = 60s
    request-timeout = 20s
    bind-timeout = 1s
    // FIXME: ports
    default-http-port = 80
    default-https-port = 443
    linger-timeout = 1min
    max-connections = 1024
    pipelining-limit = 16
    remote-address-header = off
    raw-request-uri-header = off
    transparent-head-requests = on
    verbose-error-messages = off
    response-header-size-hint = 512
    backlog = 100
    default-host-header = ""

    socket-options { #akka.http.server.socket-options
      so-receive-buffer-size = undefined
      so-send-buffer-size = undefined
      so-reuse-address = undefined
      so-traffic-class = undefined
      tcp-keep-alive = undefined
      tcp-oob-inline = undefined
      tcp-no-delay = undefined
    } #socket-options

    log-unencrypted-network-bytes = off

    http2 { #akka.http.server.http2
      request-entity-chunk-size = 65536 b
      incoming-connection-level-buffer-size = 10 MB
      incoming-stream-level-buffer-size = 512kB
    } #http2

    parsing {  #akka.http.server.parsing
      max-uri-length             = 2k
      max-method-length          = 16
      max-response-reason-length = 64
      max-header-name-length     = 64
      max-header-value-length    = 8k
      max-header-count           = 64
      max-chunk-ext-length       = 256
      max-chunk-size             = 1m
      max-content-length = 8m
      uri-parsing-mode = strict
      cookie-parsing-mode = rfc6265
      illegal-header-warnings = on
      modeled-header-parsing = on
      error-logging-verbosity = full
      illegal-response-header-value-processing-mode = error

      header-cache {  #akka.http.server.parsing.header-cache
        default = 12
        Content-MD5 = 0
        Date = 0
        If-Match = 0
        If-Modified-Since = 0
        If-None-Match = 0
        If-Range = 0
        If-Unmodified-Since = 0
        User-Agent = 32
      } #header-cache

      tls-session-info-header = off

    } #akka.http.server.parsing

  } #akka.http.server

  client {  #akka.http.client
    user-agent-header = blended-akka-http
    connecting-timeout = 10s
    idle-timeout = 60s
    request-header-size-hint = 512

    socket-options { #akka.http.client.socket-options
      so-receive-buffer-size = undefined
      so-send-buffer-size = undefined
      so-reuse-address = undefined
      so-traffic-class = undefined
      tcp-keep-alive = undefined
      tcp-oob-inline = undefined
      tcp-no-delay = undefined
    } #akka.http.client.socket-options

    parsing {
      # no overrides by default, see `akka.http.parsing` for default values
    }

    log-unencrypted-network-bytes = off

  } #akka.http.client

  host-connection-pool { #akka.http.host-connection-pool
    max-connections = 4
    min-connections = 0
    max-retries = 5
    max-open-requests = 32
    pipelining-limit = 1
    idle-timeout = 30 s
    pool-implementation = legacy
    response-entity-subscription-timeout = 1.second
    client = { #akka.http.host-connection-pool.client
      user-agent-header = blended-akka-http
      connecting-timeout = 10s
      idle-timeout = 60 s
      request-header-size-hint = 512
      proxy { #akka.http.host-connection-pool.client.proxy
        http = default
        https = default
      } #proxy

      socket-options { #akka.http.host-connection-pool.client.socket-options
        so-receive-buffer-size = undefined
        so-send-buffer-size = undefined
        so-reuse-address = undefined
        so-traffic-class = undefined
        tcp-keep-alive = undefined
        tcp-oob-inline = undefined
        tcp-no-delay = undefined
      } #akka.http.host-connection-pool.client.socket-options

      parsing { #akka.http.host-connection-pool.client.parsing
      }
    } #akka.http.host-connection-pool.client

  } #akka.http.host-connection-pool

  routing { #akka.http.routing
    verbose-error-messages = off
    file-get-conditional = on
    render-vanity-footer = yes
    range-coalescing-threshold = 80
    range-count-limit = 16
    decode-max-bytes-per-chunk = 1m
    file-io-dispatcher = ${akka.stream.blocking-io-dispatcher}
  } #akka.http.routing


  parsing { #akka.http.parsing
    max-uri-length             = 2k
    max-method-length          = 16
    max-response-reason-length = 64
    max-header-name-length     = 64
    max-header-value-length    = 8k
    max-header-count           = 64
    max-chunk-ext-length       = 256
    max-chunk-size             = 1m
    max-content-length = 8m
    uri-parsing-mode = strict
    cookie-parsing-mode = rfc6265
    illegal-header-warnings = on
    modeled-header-parsing = on
    error-logging-verbosity = full
    illegal-response-header-value-processing-mode = error

    header-cache { #akka.http.parsing.header-cache
      default = 12
      Content-MD5 = 0
      Date = 0
      If-Match = 0
      If-Modified-Since = 0
      If-None-Match = 0
      If-Range = 0
      If-Unmodified-Since = 0
      User-Agent = 32
    } #akka.http.parsing.header-cache

    tls-session-info-header = off
  } #akka.http.parsing

} #akka.http
